﻿@using NotikaIdentityEmail.Entities

@model List<Comment>

@{
    ViewData["Title"] = "Forum";
    Layout = "~/Views/UserLayout/Index.cshtml";
}


<div class="inbox-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                
                <div class="inbox-text-list sm-res-mg-t-30">
                    <div class="card" style="border:none;border-radius:18px;box-shadow:0 12px 32px rgba(15,23,42,.08);overflow:hidden;">
                        <div style="padding:28px 28px 24px;background:linear-gradient(120deg,#00c292,#0fb5e9);color:#fff;">
                            <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:10px;">
                                <div>
                                    <h2 style="margin:0;font-weight:700;">🗨️ Topluluk Forum Akışı</h2>
                                    <p style="margin:10px 0 0;opacity:.95;">Kullanıcı yorumlarını takip et, yeni yorumunu paylaş.</p>
                                </div>
                                <div style="background:rgba(255,255,255,.2);padding:10px 14px;border-radius:14px;">
                                    <div style="font-size:12px;opacity:.9;">Toplam Yorum</div>
                                    <div style="font-size:20px;font-weight:700;">@Model.Count</div>
                                </div>
                            </div>
                        </div>
                    
                        <div style="padding:24px;background:#fff;">
                            @if (!Model.Any())
                            {
                                <div class="alert alert-info" style="border-radius:12px;">Henüz yorum bulunmuyor. İlk yorumu sen yaz 🎉</div>
                            }
                            else
                            {
                                foreach (var item in Model.OrderByDescending(x => x.CommentDate))
                                {
                                    var initial = string.IsNullOrWhiteSpace(item.AppUser?.Name) ? "?" : item.AppUser.Name.Substring(0, 1);
                                    <div style="border:1px solid #e8edf3;border-radius:14px;padding:18px 20px;margin-bottom:16px;background:#fbfdff;">
                                        <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center;">
                                            <div style="display:flex;align-items:center;gap:10px;">
                                                <div style="width:38px;height:38px;border-radius:12px;background:#e0f7f2;color:#0fb5e9;display:flex;align-items:center;justify-content:center;font-weight:700;">
                                                    @initial
                                                </div>
                                                <div>
                                                    <strong style="font-size:15px;color:#21324a;">@item.AppUser.Name @item.AppUser.Surname</strong>
                                                    <div style="font-size:12px;color:#9aa8bb;">@item.CommentDate.ToString("dd MMM yyyy HH:mm")</div>
                                                </div>
                                            </div>
                                            <span style="font-size:12px;color:#7c8ca5;background:#eef2f7;padding:4px 10px;border-radius:999px;">Topluluk</span>
                                        </div>
                                        <p style="margin:12px 0 0;color:#3f4f67;line-height:1.7;">@item.CommentDetail</p>
                                    </div>
                                }
                            }

                            @await Html.PartialAsync("CreateComment")
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
    </div>
</div>